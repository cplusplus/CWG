<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 422</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116b.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-05</P>
<HR>
<A NAME="422"></A><H4>422.
  
Is a typedef redeclaration allowed with a template type that might be the same?
</H4>
<B>Section: </B>9.2.4&#160; [<A href="https://wg21.link/dcl.typedef">dcl.typedef</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Steve Adamczyk
 &#160;&#160;&#160;

 <B>Date: </B>18 June 2003<BR>


<P>Is the following valid?</P>
<PRE>
  template &lt;class T&gt; void f(T) {
    typedef int x;
    typedef T x;
  }
  int main() {
    f(1);
  }
</PRE>
<P>There is an instantiation where the function is valid.  Is an
implementation allowed to issue an error on the template declaration
because the types on the typedef are not the same
(9.2.4 [<A href="https://wg21.link/dcl.typedef">dcl.typedef</A>])?</P>

<P>How about
<PRE>
  typedef T x;
  typedef T2 x;
</PRE>
?</P>

<P>It can be argued that these cases should be allowed because they
aren't necessarily wrong, but it can also be argued that there's no
reason to write things like the first case above, and if such
a case appears it's more likely to be a mistake than some kind
of intentional test that int and T are the same type.</P>

<P><B>Notes from the October 2003 meeting:</B></P>

<P>We believe that all these cases should be allowed, and that
errors should be required only when an instance of the template is
generated.  The current standard wording does not seem to
disallow such cases, so no change is required.</P>

<BR><BR>
</BODY>
</HTML>

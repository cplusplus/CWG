<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 1285</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="1285"></A><H4>1285.
  
Trivial destructors and object lifetime
</H4>
<B>Section: </B>6.7.4&#160; [<A href="https://wg21.link/basic.life">basic.life</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Johannes Schaub
 &#160;&#160;&#160;

 <B>Date: </B>2011-04-02<BR>




<P>The Standard is self-contradictory regarding which destructor calls
end the lifetime of an object.  6.7.4 [<A href="https://wg21.link/basic.life#1">basic.life</A>] paragraph 1
says,</P>

<BLOCKQUOTE>

<P>The lifetime of an object of type T ends when:</P>

<UL>
<LI><P>if <TT>T</TT> is a class type with a non-trivial destructor
(11.4.7 [<A href="https://wg21.link/class.dtor">class.dtor</A>]), the destructor call starts, or
</P></LI>

<LI><P>the storage which the object occupies is reused or released.
</P></LI>

</UL>

</BLOCKQUOTE>

<P>i.e., the lifetime of an object of a class type with a
trivial destructor persists until its storage is reused or released.
However, 11.4.7 [<A href="https://wg21.link/class.dtor#15">class.dtor</A>] paragraph 15 says,</P>

<BLOCKQUOTE>

Once a destructor is invoked for an object, the object no longer
exists; the behavior is undefined if the destructor is invoked for an
object whose lifetime has ended (6.7.4 [<A href="https://wg21.link/basic.life">basic.life</A>]).

</BLOCKQUOTE>

<P>implying that invoking any destructor, even a trivial one, ends
the lifetime of the associated object.  Similarly, 11.9.5 [<A href="https://wg21.link/class.cdtor#1">class.cdtor</A>] paragraph 1
says,</P>

<BLOCKQUOTE>

For an object with a non-trivial destructor, referring to any
non-static member or base class of the object after the destructor
finishes execution results in undefined behavior.

</BLOCKQUOTE>

<P>A similar question arises for
pseudo-destructors for non-class types.</P>

<P><B>Notes from the August, 2011 meeting:</B></P>

<P>CWG will need a paper exploring this topic before it can act on
the issue.</P>



<P><B>Rationale (February, 2021):</B></P>

<P>The resolution of <A HREF="2256.html">issue 2256</A>
makes it clear that the destruction of an object, no matter
how accomplished, ends its lifetime.</P>

<BR><BR>
</BODY>
</HTML>

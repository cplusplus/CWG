<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 907</TITLE>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  @media (prefers-color-scheme: dark) {
    HTML { background-color:#202020; color:#f0f0f0; }
    A { color:#5bc0ff; }
    A:visited { color:#c6a8ff; }
    A:hover, a:focus { color:#afd7ff; }
    INS { background-color:#033a16; color:#aff5b4; }
    .INS { background-color: #033a16; }
    DEL { background-color:#67060c; color:#ffdcd7; }
    .DEL { background-color:#67060c; }
  }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116c.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-08</P>
<HR>
<A NAME="907"></A><H4>907.
  
Default types in requirements in auto concepts
</H4>
<B>Section: </B>_N2914_.14.10.2.2&#160; [<A href="https://wg21.link/concept.map.assoc">concept.map.assoc</A>]
 &#160;&#160;&#160;

 <B>Status: </B>concepts
 &#160;&#160;&#160;

 <B>Submitter: </B>James Widman
 &#160;&#160;&#160;

 <B>Date: </B>28 May, 2009<BR>




<P>Given the following example:</P>

<PRE>
    auto concept C&lt;typename T, typename U&gt; {
      Returnable U;
      typename type = T&amp;&amp;;
      U::U(type);
    }
</PRE>

<P>_N2914_.14.10.2.2 [<A href="https://wg21.link/concept.map.assoc#5">concept.map.assoc</A>] paragraph 5 says,</P>

<BLOCKQUOTE>

If an associated type or class template (_N2914_.14.10.1.2 [<A href="https://wg21.link/concept.assoc">concept.assoc</A>]) has a default value, a concept map member
satisfying the associated type or class template requirement shall be
implicitly defined by substituting the concept map
arguments into the default value.

</BLOCKQUOTE>

<P>It is not clear what the order of processing should be between this
step and the formation of the expression in _N2914_.14.10.2.1 [<A href="https://wg21.link/concept.map.fct">concept.map.fct</A>].  Deduction of the associated type (in _N2914_.14.10.2.2 [<A href="https://wg21.link/concept.map.assoc#4">concept.map.assoc</A>] paragraph 4) isn't used in this example, but in
general requires the expression, but the expression can't be created
without the definition of the associated type.  Perhaps the approach
should be to attempt to define the expression, fail for want of the
associated type, apply the default, and then try to define the
expression again.  Whatever the answer, this needs to be spelled out
more clearly.</P>

<BR><BR>
</BODY>
</HTML>

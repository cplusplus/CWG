<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2938</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="2938"></A><H4>2938.
  
Inheriting linkage from a previous declaration
</H4>
<B>Section: </B>6.6&#160; [<A href="https://wg21.link/basic.link">basic.link</A>]
 &#160;&#160;&#160;

 <B>Status: </B>open
 &#160;&#160;&#160;

 <B>Submitter: </B>Vlad Serebrennikov
 &#160;&#160;&#160;

 <B>Date: </B>2024-09-12<BR>


<P>(From submission
<A HREF="https://github.com/cplusplus/CWG/issues/609">#609</A>.)
</P>

<P>Consider the following example from 6.6 [<A href="https://wg21.link/basic.link#6">basic.link</A>] paragraph 6:</P>

<PRE>
  static void f();   //<SPAN CLASS="cmnt"> #1</SPAN>
  void q() {
    extern void f(); //<SPAN CLASS="cmnt"> #2, internal linkage</SPAN>
  }
</PRE>

<P>#1 has internal linkage per 6.6 [<A href="https://wg21.link/basic.link#3.1">basic.link</A>] bullet 3.1.
However, it is unclear why #2 would also get internal linkage.  At
issue is the phrasing in 6.6 [<A href="https://wg21.link/basic.link#4">basic.link</A>] paragraph 4:</P>

<BLOCKQUOTE>

... The name of an entity that belongs to a namespace scope that has not
been given internal linkage above and that is the name of ...

</BLOCKQUOTE>

<P>How does the name matching for "has been given" work here,
considering that functions may be overloaded, i.e. different entities
may have the same name?  The notion of names (as opposed to entities)
having linkage is questionable to start with.</P>

<P><B>CWG 2024-11-08</B></P>

<P>While the wording is in dire need of improvement here, the intent
is that "has been given" uses the "same entity" rules specified in
6.6 [<A href="https://wg21.link/basic.link#8">basic.link</A>] paragraph 8.  Since both declarations
of <TT>f</TT> correspond, have the same target scope, and are in the
same translation unit, they refer to the same entity.  A rewrite of
6.6 [<A href="https://wg21.link/basic.link">basic.link</A>] should improve the wording and amend the
comment in the example.</P>

<BR><BR>
</BODY>
</HTML>

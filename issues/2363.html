<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2363</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116a.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="2363"></A><H4>2363.
  
Opaque enumeration friend declarations
</H4>
<B>Section: </B>11.8.4&#160; [<A href="https://wg21.link/class.friend">class.friend</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Mike Miller
 &#160;&#160;&#160;

 <B>Date: </B>2017-10-26<BR>


<P>According to 11.8.4 [<A href="https://wg21.link/class.friend#3">class.friend</A>] paragraph 3,</P>

<BLOCKQUOTE>

<P>A friend declaration that does not declare a function shall have one of
the following forms:</P>

<UL>
<TT>friend</TT> <I>elaborated-type-specifier</I> <TT>;</TT><BR>
<TT>friend</TT> <I>simple-type-specifier</I> <TT>;</TT><BR>
<TT>friend</TT> <I>typename-specifier</I> <TT>;</TT>
</UL>

</BLOCKQUOTE>

<P>However, many implementations accept</P>

<PRE>
  friend enum E;
</PRE>

<P>even though that form is explicitly not allowed by
9.2.9.5 [<A href="https://wg21.link/dcl.type.elab#1">dcl.type.elab</A>] paragraph 1 (which only permits
<I>class-key</I> and not <I>enum-key</I> in <TT>friend</TT> declarations).
Some implementations also accept opaque enumeration declarations like</P>

<PRE>
  friend enum E : int;
</PRE>

<P>The latter form could plausibly be used in an example like:</P>

<PRE>
  class C {
    constexpr static int priv = 15;
    friend enum class my_constants;
  };
  enum class my_constants {
    pub = C::priv;                //<SPAN CLASS="cmnt"> OK because of friend decl</SPAN>
  };
</PRE>

<P>(See also <A HREF="2131.html">issue 2131</A>.)</P>

<P><B>Notes from the October, 2018 teleconference:</B></P>

<P>The suggested plausible use for the feature would require
additional wording, because the effect of friendship is currently
only described for classes and functions, not for enumerations.
There does not appear to be a demand for the change.</P>

<BR><BR>
</BODY>
</HTML>

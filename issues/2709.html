<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2709</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116b.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-05</P>
<HR>
<A NAME="2709"></A><H4>2709.
  
Parenthesized initialization of reference-to-aggregate
</H4>
<B>Section: </B>9.4.1&#160; [<A href="https://wg21.link/dcl.init.general">dcl.init.general</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Mike Miller
 &#160;&#160;&#160;

 <B>Date: </B>2023-03-14
  &#160;&#160;&#160;
  <B>Liaison: </B>EWG<BR>


<P>Paper P0960R3 enabled initialization of aggregates (including
arrays) from parenthesized expression lists.  The rather similar case
of initializating a reference to an aggregate was not addressed. For
example:</P>

<PRE>
  const int (&amp;ra)[2](1,2);
</PRE>

<P>There is no evidence in 9.4.1 [<A href="https://wg21.link/dcl.init.general#16">dcl.init.general</A>] paragraph 16 that
such support is intended, nor does 9.4.4 [<A href="https://wg21.link/dcl.init.ref#5">dcl.init.ref</A>] paragraph 5
admit an initializer other than a (single) expression for a
reference.</P>

<P>There is implementation divergence: gcc accepts, others reject.
Also, the parenthesized aggregate initialization paper P0960R3
apparently originally envisioned a textual transformation to a
braced-init-list, which presumably would have permitted the example.
It is not clear whether the reference case was intentionally or
accidentially dropped during the multiple revisions of the paper.</P>

<P><B>Additional notes (March, 2023)</B></P>

<P>Forwarded to EWG for consideration via
<A HREF="https://github.com/cplusplus/papers/issues/1494">cplusplus/papers#1494</A>
by decision of the CWG chair.</P>

<P><B>EWG 2023-05-11</B></P>

<P>It was noted that an attempt to initialize a reference-to-class
type using a parenthesized <I>expression-list</I> is also ill-formed
even if the class has a suitable constructor. Since parenthesized
aggregate initialization was modeled after a constructor invocation
for aspects such as temporary lifetimes, the status quo seems
consistent in that regard.</P>

<BR><BR>
</BODY>
</HTML>

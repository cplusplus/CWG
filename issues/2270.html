<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2270</TITLE>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  @media (prefers-color-scheme: dark) {
    HTML { background-color:#202020; color:#f0f0f0; }
    A { color:#5bc0ff; }
    A:visited { color:#c6a8ff; }
    A:hover, a:focus { color:#afd7ff; }
    INS { background-color:#033a16; color:#aff5b4; }
    .INS { background-color: #033a16; }
    DEL { background-color:#67060c; color:#ffdcd7; }
    .DEL { background-color:#67060c; }
  }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116c.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-08</P>
<HR>
<A NAME="2270"></A><H4>2270.
  
Non-inline functions and explicit instantiation declarations
</H4>
<B>Section: </B>13.9.3&#160; [<A href="https://wg21.link/temp.explicit">temp.explicit</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Richard Smith
 &#160;&#160;&#160;

 <B>Date: </B>2016-06-10<BR>




<P>Consider:</P>

<PRE>
  template &lt;class F&gt; F foo() { return 1; }
  template &lt;class F&gt; struct S { F foo() { return 1; } };
  extern template int foo&lt;int&gt;();
  extern template struct S&lt;int&gt;;
  int bar() { return foo&lt;int&gt;() + S&lt;int&gt;().foo(); }
</PRE>

<P>An implementation is permitted to instantiate (and thus locally
inline) <TT>S&lt;int&gt;::foo</TT>, but not <TT>S&lt;int&gt;</TT>, because
13.9.2 [<A href="https://wg21.link/temp.inst#10">temp.inst</A>] paragraph 10 states:</P>

<BLOCKQUOTE>

Except for inline functions, declarations with types deduced from
their initializer or return value (9.2.9.7 [<A href="https://wg21.link/dcl.spec.auto">dcl.spec.auto</A>]),
const variables of literal types, variables of reference types, and
class template specializations, explicit instantiation declarations
have the effect of suppressing the implicit instantiation of the
entity to which they refer.

</BLOCKQUOTE>

<P><B>Additional note (February, 2022):</B></P>

<P>The paragraph in question was removed by P1815R2
(Translation-unit-local entities) (adopted 2020-02).</P>

<P><B>EWG 2022-11-11</B></P>

<P>Any change would require a paper.</P>

<BR><BR>
</BODY>
</HTML>

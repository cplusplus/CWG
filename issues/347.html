<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 347</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116a.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="347"></A><H4>347.
  
Use of derived class name in defining base class nested class
</H4>
<B>Section: </B>11.4.12&#160; [<A href="https://wg21.link/class.nest">class.nest</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Jason Shirk
 &#160;&#160;&#160;

 <B>Date: </B>21 March 2002<BR>




<P>11.4.2 [<A href="https://wg21.link/class.mfct#5">class.mfct</A>] paragraph 5 says this about member
functions defined lexically outside the class:</P>
<BLOCKQUOTE>
the member function name shall be qualified by its class name using
the :: operator
</BLOCKQUOTE>

<P>11.4.9.3 [<A href="https://wg21.link/class.static.data#2">class.static.data</A>] paragraph 2 says this about static
data members:</P>
<BLOCKQUOTE>
In the definition at namespace scope, the name of the static data
member shall be qualified by its class name using the :: operator
</BLOCKQUOTE>

<P>I would have expected similar wording in 11.4.12 [<A href="https://wg21.link/class.nest#3">class.nest</A>] paragraph 3
for nested classes. Without such wording, the following
seems to be legal (and is allowed by all the compilers I have):</P>
<PRE>
  struct base {
    struct nested;
  };

  struct derived : base {};
  struct derived::nested {};
</PRE>

<P>Is this just an oversight, or is there some rationale for this behavior?</P>

<P><B>Rationale (July, 2008):</B></P>

<P>The wording in Clause 11 [<A href="https://wg21.link/class#10">class</A>] paragraph 10 (added by the
resolution of <A HREF="284.html">issue 284</A>, which was approved
after this issue was raised) makes the example ill-formed:</P>

<BLOCKQUOTE>

If a <I>class-head</I> contains a <I>nested-name-specifier</I>, the
<I>class-specifier</I> shall refer to a class that was previously
declared directly in the class or namespace to which
the <I>nested-name-specifier</I> refers (i.e., neither inherited nor
introduced by a <I>using-declaration</I>), and
the <I>class-specifier</I> shall appear in a namespace enclosing the
previous declaration.

</BLOCKQUOTE>

<BR><BR>
</BODY>
</HTML>

<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2964</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116b.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-05</P>
<HR>
<A NAME="2964"></A><H4>2964.
  
Reading "invalid pointer values"
</H4>
<B>Section: </B>7.3.2&#160; [<A href="https://wg21.link/conv.lval">conv.lval</A>]
 &#160;&#160;&#160;

 <B>Status: </B>open
 &#160;&#160;&#160;

 <B>Submitter: </B>Davis Herring
 &#160;&#160;&#160;

 <B>Date: </B>2024-11-22<BR>


<P>(From submission
<A HREF="https://github.com/cplusplus/CWG/issues/645">#645</A>.)
</P>

<P>
<A HREF="2822.html">Issue 2822</A> clarified that pointer values
are not replaced by invalid pointer values when the duration of the
storage of their pointee ends, but merely become invalid in the
context of evaluations outside of the duration of the storage.
However, 7.3.2 [<A href="https://wg21.link/conv.lval#3.3">conv.lval</A>] bullet 3.3 still reads:</P>

<BLOCKQUOTE>

The result of the conversion is determined according to the following
rules:

<UL>
<LI>...</LI>
<LI>Otherwise, if the object to which the glvalue refers contains an
invalid pointer value (6.7.6.5.3 [<A href="https://wg21.link/basic.stc.dynamic.deallocation">basic.stc.dynamic.deallocation</A>]), the behavior
is implementation-defined.</LI>
<LI>...</LI>
</UL>

</BLOCKQUOTE>

<P><U>Possible resolution:</U></P>

<P>Change in 7.3.2 [<A href="https://wg21.link/conv.lval#3.3">conv.lval</A>] bullet 3.3 as follows:</P>

<BLOCKQUOTE>

The result of the conversion is determined according to the following
rules:

<UL>
<LI>...</LI>
<LI>Otherwise, if the object to which the glvalue refers
contains <DEL>an invalid pointer value
(6.7.6.5.3 [<A href="https://wg21.link/basic.stc.dynamic.deallocation">basic.stc.dynamic.deallocation</A>])</DEL>
<INS>a pointer value that is not valid in the context of the
conversion (6.8.4 [<A href="https://wg21.link/basic.compound">basic.compound</A>])</INS>, the behavior is
implementation-defined.</LI>
<LI>...</LI>
</UL>

</BLOCKQUOTE>

<BR><BR>
</BODY>
</HTML>

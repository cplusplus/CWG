<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 501</TITLE>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  @media (prefers-color-scheme: dark) {
    HTML { background-color:#202020; color:#f0f0f0; }
    A { color:#5bc0ff; }
    A:visited { color:#c6a8ff; }
    A:hover, a:focus { color:#afd7ff; }
    INS { background-color:#033a16; color:#aff5b4; }
    .INS { background-color: #033a16; }
    DEL { background-color:#67060c; color:#ffdcd7; }
    .DEL { background-color:#67060c; }
  }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116c.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-08</P>
<HR>
<A NAME="501"></A><H4>501.
  
Visibility of friend declarations within the befriending class
</H4>
<B>Section: </B>11.8.4&#160; [<A href="https://wg21.link/class.friend">class.friend</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Gabriel Dos Reis
 &#160;&#160;&#160;

 <B>Date: </B>25 Jan 2005<BR>




<P>I just received a query from a user of why line #1 in the following
snippet is ill-formed:</P>

<PRE>
    void g(int (*)(int));

    template&lt;class T&gt;
    class A {
       friend int f(int) { return 0; }

       void h() {
           g(f);          // #1
       }
    };
</PRE>

<P>I believe that the special invisibility rule about friends is too
complicated and makes life too complicated, especially considering
that friends in templates are not templates, nor can they be
conveniently rewritten with a &#8220;first declare at the namespace
scope&#8221; rule.  I can understand the rules when they make
programming easier or prevent some obvious &#8220;silly&#8221;
mistakes; but that does not seem to be the case here.
</P>

<P>
<U>John Spicer</U>: See two papers that discuss this issue: N0878
by Bill Gibbons, which ultimately gave rise to our current rules, and
N0913 by me as an alternative to N0878.</P>

<P><B>Rationale (April, 2005):</B></P>

<P>The Standard is clear and consistent; this rule is the result of an
explicit decision by the Committee.</P>

<BR><BR>
</BODY>
</HTML>

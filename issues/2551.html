<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2551</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="2551"></A><H4>2551.
  
"Refers to allocated storage" has no meaning
</H4>
<B>Section: </B>6.7.4&#160; [<A href="https://wg21.link/basic.life">basic.life</A>]
 &#160;&#160;&#160;

 <B>Status: </B>review
 &#160;&#160;&#160;

 <B>Submitter: </B>Andrey Erokhin
 &#160;&#160;&#160;

 <B>Date: </B>2020-09-07<BR>




<P>6.7.4 [<A href="https://wg21.link/basic.life#6">basic.life</A>] paragraph 6 specifies:</P>

<BLOCKQUOTE>

Before the lifetime of an object has started but after the storage
which the object will occupy has been allocated or, after the lifetime
of an object has ended and before the storage which the object
occupied is reused or released, any pointer that represents the
address of the storage location where the object will be or was
located may be used but only in limited ways. For an object under
construction or destruction, see 11.9.5 [<A href="https://wg21.link/class.cdtor">class.cdtor</A>].
Otherwise, such a pointer refers to allocated storage
(6.7.6.5.2 [<A href="https://wg21.link/basic.stc.dynamic.allocation">basic.stc.dynamic.allocation</A>]), and using the pointer as if the
pointer were of type <TT>void*</TT> is well-defined.

</BLOCKQUOTE>

<P>Similarly, 6.7.4 [<A href="https://wg21.link/basic.life#7">basic.life</A>] paragraph 7 specifies:</P>

<BLOCKQUOTE>

Similarly, before the lifetime of an object has started but after the
storage which the object will occupy has been allocated or, after the
lifetime of an object has ended and before the storage which the
object occupied is reused or released, any glvalue that refers to the
original object may be used but only in limited ways.  For an object
under construction or destruction, see 11.9.5 [<A href="https://wg21.link/class.cdtor">class.cdtor</A>].
Otherwise, such a glvalue refers to allocated storage
(6.7.6.5.2 [<A href="https://wg21.link/basic.stc.dynamic.allocation">basic.stc.dynamic.allocation</A>]), and using the properties of the
glvalue that do not depend on its value is well-defined.

</BLOCKQUOTE>

<P>In either case, it is unclear what "refers to allocated storage"
means, beyond the properties ascribed to an object in
6.7.2 [<A href="https://wg21.link/intro.object">intro.object</A>].</P>

<P>See also <A HREF="1853.html">issue 1853</A>.</P>

<P><B>Proposed resolution:</B></P>

<OL>
<LI>
<P>Change in 6.7.4 [<A href="https://wg21.link/basic.life#6">basic.life</A>] paragraph 6 as follows:</P>

<BLOCKQUOTE>

For an object under construction or destruction, see
11.9.5 [<A href="https://wg21.link/class.cdtor">class.cdtor</A>].  Otherwise, <DEL>such a pointer refers to
allocated storage (6.7.6.5.2 [<A href="https://wg21.link/basic.stc.dynamic.allocation">basic.stc.dynamic.allocation</A>]), and</DEL>
using <DEL>the</DEL> <INS>such a</INS> pointer as if the pointer were
of type <TT>void*</TT> is well-defined.

</BLOCKQUOTE>

</LI>

<LI>
<P>Change in 6.7.4 [<A href="https://wg21.link/basic.life#7">basic.life</A>] paragraph 7 as follows:</P>

<BLOCKQUOTE>

For an object under construction or destruction, see
11.9.5 [<A href="https://wg21.link/class.cdtor">class.cdtor</A>].  Otherwise, <DEL>such a glvalue refers to
allocated storage (6.7.6.5.2 [<A href="https://wg21.link/basic.stc.dynamic.allocation">basic.stc.dynamic.allocation</A>]), and</DEL> using
the properties of <DEL>the</DEL> <INS>such a</INS> glvalue that do not
depend on its value is well-defined.

</BLOCKQUOTE>

</LI>
</OL>

<BR><BR>
</BODY>
</HTML>

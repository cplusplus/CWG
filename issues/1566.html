<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 1566</TITLE>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  @media (prefers-color-scheme: dark) {
    HTML { background-color:#202020; color:#f0f0f0; }
    A { color:#5bc0ff; }
    A:visited { color:#c6a8ff; }
    A:hover, a:focus { color:#afd7ff; }
    INS { background-color:#033a16; color:#aff5b4; }
    .INS { background-color: #033a16; }
    DEL { background-color:#67060c; color:#ffdcd7; }
    .DEL { background-color:#67060c; }
  }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116c.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-08</P>
<HR>
<A NAME="1566"></A><H4>1566.
  
Should <TT>new std::initializer_list&lt;T&gt;</TT> be ill-formed?
</H4>
<B>Section: </B>7.6.2.8&#160; [<A href="https://wg21.link/expr.new">expr.new</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Steve Adamczyk
 &#160;&#160;&#160;

 <B>Date: </B>2012-10-10<BR>




<P>A <I>new-expression</I> that creates an object whose type is a
specialization of <TT>std::initializer_list</TT> initialized from an
initializer list results in undefined behavior if the object survives
past the end of the full-expression, when the lifetime of the underlying
array object ends.  Since such a <I>new-expression</I> is effectively
useless, should it be made ill-formed?</P>

<P><B>Notes from the October, 2012 meeting:</B></P>

<P>The consensus of CWG was that this usage should be ill-formed.</P>

<P><B>Rationale (February, 2013):</B></P>

<P>Because the library emulation of <TT>std::is_constructible</TT> uses
unevaluated <I>new-expression</I>s in the implementation, making a
<TT>new</TT> of <TT>std::initializer_list</TT> ill-formed would give the
wrong results for its constructibility.  CWG determined that it would be
acceptable to leave diagnosing of actual undefined behavior resulting from
such constructs to the discretion of the implementation.</P>

<BR><BR>
</BODY>
</HTML>

<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 1045</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116b.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-05</P>
<HR>
<A NAME="1045"></A><H4>1045.
  
Requiring explicit instantiation declarations
</H4>
<B>Section: </B>13.9.3&#160; [<A href="https://wg21.link/temp.explicit">temp.explicit</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>Doug Gregor
 &#160;&#160;&#160;

 <B>Date: </B>2010-03-05<BR>




<P>The current language specification allows suppression of implicit
instantiations of templates via an explicit instantiation declaration;
if all uses of a particular specialization follow an explicit
instantiation declaration for that specialization, and there is one
explicit instantiation definition in the program, there will be only
a single copy of that instance.  However, the Standard does not require
the presence of an explicit instantiation declaration prior to use, so
implementations must still be prepared (using weak symbols, for example)
to handle multiple copies of the instance at link time.  This can be
a significant overhead, particularly in shared libraries where weak
symbols must be resolved at load time.  Requiring the presence of an
explicit instantiation declaration in every translation unit in which
the specialization is used would allow the compiler to emit strong
symbols for the explicit instantiation definition and reduce the
overhead.</P>

<P>On the other hand, the current definition allows use of multiple
independent libraries with explicit instantiation directives of the
same specializations (from a common third-party library, for instance),
as well as incremental migration of libraries to use of explicit
instantiation declarations rather than requiring all libraries to
be updated at once.</P>

<P><B>Rationale (August, 2010):</B></P>

<P>CWG prefers the current specification.</P>

<BR><BR>
</BODY>
</HTML>

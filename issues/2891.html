<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2891</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="2891"></A><H4>2891.
  
Normative status of implementation limits
</H4>
<B>Section: </B>Clause Annex B&#160; [<A href="https://wg21.link/implimits">implimits</A>]
 &#160;&#160;&#160;

 <B>Status: </B>DRWP
 &#160;&#160;&#160;

 <B>Submitter: </B>ISO/CS
 &#160;&#160;&#160;

 <B>Date: </B>2024-05-17<BR>


<P>[Accepted as a DR at the June, 2024 meeting.]</P>

<P>It is unclear whether Clause Annex B [<A href="https://wg21.link/implimits">implimits</A>] is normative,
and what its normative content is.  The Annex was
<A HREF="https://github.com/cplusplus/draft/commit/7e66cc0c7d0c4fea57fff2c283dd0900d6333f8e">editorially switched</A>
from "informative" to "normative" in September 2020 with this change
description:</P>

<BLOCKQUOTE>
<P>[intro.compliance.general, implimits] Cite Annex B normatively.</P>

<P>This change also promotes Annex B [implimits] to a "normative"
annex.  The existing wording in the annex is already normative in
character.</P>
</BLOCKQUOTE>

<P>On the other hand, this sentence in Clause Annex B [<A href="https://wg21.link/implimits#2">implimits</A>] paragraph 2 seems to say otherwise:</P>

<BLOCKQUOTE>

... However, these quantities are only guidelines and do not determine
compliance.

</BLOCKQUOTE>

<P>If it is indeed intentional that the actual quantitative limits are
just guidelines, then the normative (conformance-related) content is
limited to Clause Annex B [<A href="https://wg21.link/implimits#1">implimits</A>] paragraph 1, which establishes
documentation requirements only:</P>

<BLOCKQUOTE>

Because computers are finite, C++ implementations are inevitably
limited in the size of the programs they can successfully
process. Every implementation shall document those limitations where
known. This documentation may cite fixed limits where they exist, say
how to compute variable limits as a function of available resources,
or say that fixed limits do not exist or are unknown.

</BLOCKQUOTE>

<P>However, those general documentation requirements are best
expressed in 4.1.1 [<A href="https://wg21.link/intro.compliance.general">intro.compliance.general</A>], leaving
Clause Annex B [<A href="https://wg21.link/implimits">implimits</A>] with just an informative list of minimum
suggested quantities.</P>

<P><U>Possible resolution [SUPERSEDED]:</U></P>

<OL>

<LI>
<P>Change in 4.1.1 [<A href="https://wg21.link/intro.compliance.general#2.1">intro.compliance.general</A>] bullet 2.1 as follows:</P>

<BLOCKQUOTE>

If a program contains no violations of the rules in Clause 5 through
Clause 33 and Annex D, a conforming implementation shall, within its
resource limits <DEL>as described in Annex B</DEL> <INS>(see
below)</INS>, accept and correctly execute that program.

</BLOCKQUOTE>
</LI>

<LI>
<P>Insert a new paragraph before 4.1.1 [<A href="https://wg21.link/intro.compliance.general#8">intro.compliance.general</A>] paragraph 8 as follows:</P>

<BLOCKQUOTE>

<P class="ins">
An implementation shall document its limitations in the size of the
programs it can successfully process, where known. This documentation
may cite fixed limits where they exist, say how to compute variable
limits as a function of available resources, or say that fixed limits
do not exist or are unknown. Clause Annex B [<A href="https://wg21.link/implimits">implimits</A>] lists some
quantities that can be subject to limitations, and recommends a
minimum value for each quantity.
</P>

<P>A conforming implementation may have extensions (including additional
library functions), ...</P>

</BLOCKQUOTE>
</LI>

<LI>
<P>Change in Clause Annex B [<A href="https://wg21.link/implimits#1">implimits</A>] paragraph 1 and paragraph 2 as
follows:</P>

<BLOCKQUOTE>

<P>Annex B<BR>
(<DEL>normative</DEL><INS>informative</INS>)</P>

<P class="del">Because computers are finite, C++ implementations are inevitably
limited in the size of the programs they can successfully
process. Every implementation shall document those limitations where
known. This documentation may cite fixed limits where they exist, say
how to compute variable limits as a function of available resources,
or say that fixed limits do not exist or are unknown.</P>

<P>
<DEL>The limits may
constrain quantities that include those described below or others.</DEL>
<INS>Implementations can exhibit limitations, among others
for the quantities in the following list.</INS>
The bracketed number
following each quantity is recommended as the minimum <INS>value</INS>
for that quantity.
<DEL>However, these quantities are only guidelines and do not
determine compliance.</DEL>
</P>

</BLOCKQUOTE>
</LI>
</OL>

<P><B>CWG 2024-05-17</B></P>

<P>CWG was divided whether to relax the documentation requirement or
not.  As a next step, the wording for a relaxation should be
reviewed.</P>

<P><B>Proposed resolution (approved by CWG 2024-06-26):</B></P>

<OL>

<LI>
<P>Change in 4.1.1 [<A href="https://wg21.link/intro.compliance.general#2.1">intro.compliance.general</A>] bullet 2.1 as follows:</P>

<BLOCKQUOTE>

If a program contains no violations of the rules in Clause 5 through
Clause 33 and Annex D, a conforming implementation shall<DEL>, within
its resource limits as described in Annex B,</DEL> accept and
correctly execute that program<INS>, except when the implementation's
limitations (see below) are exceeded</INS>.

</BLOCKQUOTE>
</LI>

<LI>
<P>Insert a new paragraph before 4.1.1 [<A href="https://wg21.link/intro.compliance.general#8">intro.compliance.general</A>] paragraph 8 as follows:</P>

<BLOCKQUOTE>

<P class="ins">
An implementation is encouraged to document its limitations in the
size or complexity of the programs it can successfully process, if
possible and where known. Clause Annex B [<A href="https://wg21.link/implimits">implimits</A>] lists some
quantities that can be subject to limitations and a potential minimum
supported value for each quantity.
</P>

<P>A conforming implementation may have extensions (including additional
library functions), ...</P>

</BLOCKQUOTE>
</LI>

<LI>
<P>Change in Clause Annex B [<A href="https://wg21.link/implimits#1">implimits</A>] paragraph 1 and paragraph 2 as
follows:</P>

<BLOCKQUOTE>

<P>Annex B<BR>
(<DEL>normative</DEL><INS>informative</INS>)</P>

<P class="del">Because computers are finite, C++ implementations are inevitably
limited in the size of the programs they can successfully
process. Every implementation shall document those limitations where
known. This documentation may cite fixed limits where they exist, say
how to compute variable limits as a function of available resources,
or say that fixed limits do not exist or are unknown.</P>

<P>
<DEL>The limits may
constrain quantities that include those described below or others.</DEL>
<INS>Implementations can exhibit limitations for various quantities;
some possibilities are presented in the following list.</INS> The
bracketed number following each quantity is <DEL>recommended as
the</DEL> <INS>a potential</INS> minimum <INS>value</INS> for that
quantity.
<DEL>However, these quantities are only guidelines and do not
determine compliance.</DEL>
</P>

</BLOCKQUOTE>
</LI>
</OL>

<BR><BR>
</BODY>
</HTML>

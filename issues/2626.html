<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2626</TITLE>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  @media (prefers-color-scheme: dark) {
    HTML { background-color:#202020; color:#f0f0f0; }
    A { color:#5bc0ff; }
    A:visited { color:#c6a8ff; }
    A:hover, a:focus { color:#afd7ff; }
    INS { background-color:#033a16; color:#aff5b4; }
    .INS { background-color: #033a16; }
    DEL { background-color:#67060c; color:#ffdcd7; }
    .DEL { background-color:#67060c; }
  }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116c.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-08</P>
<HR>
<A NAME="2626"></A><H4>2626.
  
Rephrase ones' complement using base-2 representation
</H4>
<B>Section: </B>7.6.2.2&#160; [<A href="https://wg21.link/expr.unary.op">expr.unary.op</A>]
 &#160;&#160;&#160;

 <B>Status: </B>C++23
 &#160;&#160;&#160;

 <B>Submitter: </B>Jim X
 &#160;&#160;&#160;

 <B>Date: </B>2022-09-10<BR>


<P>[Accepted as a DR at the November, 2022 meeting.]</P>

<P>Subclause 7.6.2.2 [<A href="https://wg21.link/expr.unary.op#10">expr.unary.op</A>] paragraph 10 specifies:</P>

<BLOCKQUOTE>

The operand of ~ shall have integral or unscoped enumeration type; the
result is the ones' complement of its operand. Integral promotions are
performed. The type of the result is the type of the promoted operand.
There is an ambiguity in the grammar...

</BLOCKQUOTE>

<P>This should be phrased in terms of the base-2 representation
similar to bitwise-AND, instead of alluding to some bit representation
by using the term "ones' complement".</P>

<P><B>Proposed resolution (approved by CWG 2022-10-07):</B></P>

<P>Subclause 7.6.2.2 [<A href="https://wg21.link/expr.unary.op#10">expr.unary.op</A>] paragraph 10 specifies:</P>

<BLOCKQUOTE>

The operand of ~ shall have integral or unscoped enumeration
type<DEL>; the result is the ones' complement of its
operand</DEL>. Integral promotions are performed. The type of the
result is the type of the promoted operand.
<INS>Given the coefficients <TT>x<SUB>i</SUB></TT> of the base-2
representation (6.8.2 [<A href="https://wg21.link/basic.fundamental">basic.fundamental</A>]) of the promoted
operand <TT>x</TT>, the coefficient <TT>r<SUB>i</SUB></TT> of the
base-2 representation of the result <TT>r</TT> is 1
if <TT>x<SUB>i</SUB></TT> is 0, and 0 otherwise.</INS>

There is an ambiguity in the grammar...

</BLOCKQUOTE>

<BR><BR>
</BODY>
</HTML>

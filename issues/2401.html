<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2401</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116b.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-05</P>
<HR>
<A NAME="2401"></A><H4>2401.
  
Array decay vs prohibition of subobject non-type arguments
</H4>
<B>Section: </B>13.4.3&#160; [<A href="https://wg21.link/temp.arg.nontype">temp.arg.nontype</A>]
 &#160;&#160;&#160;

 <B>Status: </B>drafting
 &#160;&#160;&#160;

 <B>Submitter: </B>John Spicer
 &#160;&#160;&#160;

 <B>Date: </B>2019-02-06<BR>


<P>Consider an example like:</P>

<PRE>
  template &lt;const char *N&gt; struct A { static const int val; };

  template &lt;const char *N&gt; const int A&lt;N&gt;::val = 0;

  static const char c[2] = "";

  int main() {
    A&lt;c&gt; a;
    return A&lt;c&gt;::val;
  }
</PRE>

<P>Formally, this appears to violate the prohibition of using the
address of a subobject as a non-type template argument, since
the array reference <TT>c</TT> in the argument decays to a pointer
to the first element of the array. However, at least some
implementations accept this example, and at least conceptually the
template argument designates the complete object. Should an
exception be made for the result of array decay?</P>

<P>See also <A HREF="2043.html">issue 2043</A>.</P>

<P><B>Notes from the July, 2019 meeting</B></P>

<P>CWG felt that the example should be allowed if the parameter type
is a pointer to object type (thus prohibiting <TT>void*</TT>).</P>

<BR><BR>
</BODY>
</HTML>

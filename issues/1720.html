<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 1720</TITLE>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  @media (prefers-color-scheme: dark) {
    HTML { background-color:#202020; color:#f0f0f0; }
    A { color:#5bc0ff; }
    A:visited { color:#c6a8ff; }
    A:hover, a:focus { color:#afd7ff; }
    INS { background-color:#033a16; color:#aff5b4; }
    .INS { background-color: #033a16; }
    DEL { background-color:#67060c; color:#ffdcd7; }
    .DEL { background-color:#67060c; }
  }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116c.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2025-03-08</P>
<HR>
<A NAME="1720"></A><H4>1720.
  
Macro invocation in <TT>#include</TT> directive
</H4>
<B>Section: </B>15.3&#160; [<A href="https://wg21.link/cpp.include">cpp.include</A>]
 &#160;&#160;&#160;

 <B>Status: </B>NAD
 &#160;&#160;&#160;

 <B>Submitter: </B>David Krauss
 &#160;&#160;&#160;

 <B>Date: </B>2013-07-24<BR>


<P>According to 15.3 [<A href="https://wg21.link/cpp.include#4">cpp.include</A>] paragraph 4,</P>

<BLOCKQUOTE>

<P>A preprocessing directive of the form</P>

<UL>
<TT># include</TT> <I>pp-tokens new-line</I>
</UL>

<P>(that does not match one of the two previous forms) is permitted. The
preprocessing tokens after <TT>include</TT> in the directive are processed
just as in normal text (Each identifier currently defined as a macro name
is replaced by its replacement list of preprocessing tokens.). If the
directive resulting after all replacements does not match one of the two
previous forms, the behavior is undefined.<SUP>155</SUP> The method by
which a sequence of preprocessing tokens between a <TT>&lt;</TT> and
a <TT>&gt;</TT> preprocessing token pair or a pair of <TT>"</TT> characters
is combined into a single header name preprocessing token is
implementation-defined.</P>

</BLOCKQUOTE>

<P>It might be inferred from the phrase &#8220;in the directive&#8221; that
only tokens before the terminating newline would be available for macro
expansion, and that consequently the closing right parenthesis of a
function-style macro must appear on the same line.  However, it would be
clearer if it used language like that of 15.6.2 [<A href="https://wg21.link/cpp.subst#1">cpp.subst</A>] paragraph 1:
</P>

<BLOCKQUOTE>

each argument's preprocessing tokens are completely macro replaced as if
they formed the rest of the preprocessing file; no other preprocessing
tokens are available.

</BLOCKQUOTE>

<P><B>Rationale (September, 2013):</B></P>

<P>The wording referring to preprocessing tokens &#8220;in the
directive&#8221; is a clear enough indication that no tokens after
the terminating newline are considered.</P>

<BR><BR>
</BODY>
</HTML>

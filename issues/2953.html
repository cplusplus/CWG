<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=us-ascii">
<TITLE>
    CWG Issue 2953</TITLE>
<STYLE TYPE="text/css">
  INS { text-decoration:none; font-weight:bold; background-color:#A0FFA0 }
  .INS { text-decoration:none; background-color:#D0FFD0 }
  DEL { text-decoration:line-through; background-color:#FFA0A0 }
  .DEL { text-decoration:line-through; background-color: #FFD0D0 }
  SPAN.cmnt { font-family:Times; font-style:italic }
</STYLE>
</HEAD>
<BODY>
<P><EM>This is an unofficial snapshot of the ISO/IEC JTC1 SC22 WG21
  Core Issues List revision 116.
  See http://www.open-std.org/jtc1/sc22/wg21/ for the official
  list.</EM></P>
<P>2024-12-19</P>
<HR>
<A NAME="2953"></A><H4>2953.
  
Value representation for non-trivially-copyable types
</H4>
<B>Section: </B>6.8.1&#160; [<A href="https://wg21.link/basic.types.general">basic.types.general</A>]
 &#160;&#160;&#160;

 <B>Status: </B>open
 &#160;&#160;&#160;

 <B>Submitter: </B>Brian Bi
 &#160;&#160;&#160;

 <B>Date: </B>2024-11-08<BR>


<P>(From submission
<A HREF="https://github.com/cplusplus/CWG/issues/635">#635</A>.)
</P>

<P>Subclause 6.8.1 [<A href="https://wg21.link/basic.types.general#4">basic.types.general</A>] paragraph 4 specifies:</P>

<BLOCKQUOTE>

... The <I>value representation</I> of a type T is the set of bits in
the object representation of T that participate in representing a
value of type T. ... For trivially copyable types, the value
representation is a set of bits in the object representation that
determines a <I>value</I>, ... [ Footnote: ... ]

</BLOCKQUOTE>

<P>It is unclear what difference is intended between "participate in
representing a value" and "determines a value".  If there is no
difference, it is unclear why one of the statements applies only to
trivially copyable types. The standard does not seem to refer to the
value representation of types that are not trivially copyable.</P>

<P><U>Suggested resolution:</U></P>

<P>Change in 6.8.1 [<A href="https://wg21.link/basic.types.general#4">basic.types.general</A>] paragraph 4 as follows:</P>

<BLOCKQUOTE>

The <I>object representation</I> of a complete object type T is the
sequence of N unsigned char objects taken up by a non-bit-field
complete object of type T, where N equals sizeof(T). The <I>value
representation</I> of a <INS>trivially copyable</INS> type T is the
set of bits in the object representation of T that participate in
representing a <DEL>value</DEL> <INS><I>value</I></INS> of type
T<INS>, which is one discrete element of an implementation-defined set
of values</INS>. The object and value representation of a
non-bit-field complete object of type T are the bytes and bits,
respectively, of the object corresponding to the object and value
representation of its type. The object representation of a bit-field
object is the sequence of N bits taken up by the object, where N is
the width of the bit-field (11.4.10 [<A href="https://wg21.link/class.bit">class.bit</A>]).  The value
representation of a bit-field object is the set of bits in the object
representation that participate in representing its value. Bits in the
object representation of a type or object that are not part of the
value representation are <I>padding bits</I>. <DEL>For trivially copyable
types, the value representation is a set of bits in the object
representation that determines a <I>value</I>, which is one discrete
element of an implementation-defined set of values.</DEL> [ Footnote: ... ]

</BLOCKQUOTE>

<BR><BR>
</BODY>
</HTML>
